{% extends "main/base.html" %}

{% block container %}
    <div id="user-profile" data-username="{{ user.username }}">
        {% block header %}
            <div id="header">
                <div id="logo">
                    <div id="sidebartoggle"><i class="fas fa-bars"></i></div>
                    <a href="/"><h1>DEX</h1></a>
                </div>
                <div class="ui search">
                    <div class="ui fluid small inverted transparent icon input">
                        <input class="prompt" type="text"
                               placeholder="Search for other trainers...">
                        <i class="search icon"></i>
                    </div>
                    <div class="results"></div>
                </div>
                {% if current_user.is_authenticated %}
                    <div id="menu">
                        <a href="{{ url_for('auth.logout') }}"><i class="fas fa-sign-out"></i></a>
                        <a href="{{ url_for('main.show_user', username=current_user.username) }}"><i
                                class="fas fa-user-circle"></i></a>
                    </div>
                {% endif %}
            </div>
        {% endblock %}

        {% block sidebar %}
            <div id="sidebar">
                <div id="sidebar-body">
                    <div id="player-card">
                        <div id="player-team-logo" class="{{ user.player_team }}"></div>
                        <h2>{{ user.username }}</h2>
                        <label>Level {{ user.player_level }}</label>
                    </div>
                    <div id="sidebar-links">
                        <div class="sidebar-link living-dex active">
                            <i class="icon far fa-ballot-check"></i>
                            <span>Living DEX</span>
                            <i class="icon right angle"></i>
                        </div>
                        <div class="sidebar-link legacy-moves">
                            <i class="bolt icon"></i>
                            <span>Legacy Moves</span>
                            <i class="icon right angle"></i>
                        </div>
                        <div class="sidebar-link raid-bosses">
                            <i class="raid icon"></i>
                            <span>Raid Bosses</span>
                            <i class="icon right angle"></i>
                        </div>

                        <div class="sidebar-link egg-hatches">
                            <i class="egg icon"></i>
                            <span>Egg Hatches</span>
                            <i class="icon right angle"></i>
                        </div>

                        {% if user.username==current_user.username %}
                            <div class="sidebar-link user-settings">
                                <i class="cog icon"></i>
                                <span>Settings</span>
                                <i class="icon right angle"></i>
                            </div>
                        {% endif %}
                    </div>

                    <div id="footer-links">

                    </div>
                </div>
            </div>
        {% endblock %}

        {% block content %}
            <div id="content">
                <div class="dex content-panel active">
                    <div id="pokemon-filters">
                        <div class="ui multiple selection fluid dropdown">
                            <input type="hidden" id="gen-select" value="{{ request.args.get('gen') if request.args.get('gen') != None }}">
                            <i class="dropdown icon"></i>
                            <div class="default text">Generations</div>
                            <div class="menu">
                                <div class="item" data-value="all">All Released Generations</div>
                                <div class="item" data-value="1">Gen I (Kanto)</div>
                                <div class="item" data-value="2">Gen II (Johto)</div>
                                <div class="item" data-value="3">Gen III (Hoenn)</div>
                                <div class="item" data-value="4">Gen IV (Sinnoh)</div>
                                <div class="item" data-value="7">Gen VII (Alola)</div>
                            </div>
                        </div>


                        <div class="ui multiple selection fluid dropdown">
                            <input type="hidden" id="cat-select" value="{{ request.args.get('cat') if request.args.get('cat') != None }}">
                            <i class="dropdown icon"></i>
                            <div class="default text">Category</div>
                            <div class="menu">
                                <div class="item" data-value="all">
                                    <i class="icon book"></i> All Pokemon
                                </div>
                                <div class="item" data-value="shiny">
                                    <i class="icon fas fa-star-christmas"></i> Shiny
                                </div>
                                <div class="item" data-value="alolan">
                                    <i class="icon alolan"></i> Alolan
                                </div>
                                <div class="item" data-value="regional">
                                    <i class="icon fas fa-globe-africa"></i> Regional
                                </div>
                                <div class="item" data-value="legendary">
                                    <i class="icon legendary"></i> Legendary
                                </div>
                                <div class="item" data-value="mythical">
                                    <i class="icon fas fa-map-marker-question"></i> Mythical
                                </div>
                                <div class="item" data-value="costumed">
                                    <i class="icon fab fa-pied-piper-hat"></i> Costumed
                                </div>
                                <div class="item" data-value="lucky">
                                    <i class="icon fas fa-dice"></i> Lucky
                                </div>
                                <div class="item" data-value="level_1">
                                    <i class="icon fas fa-tachometer-slowest"></i> Level 1
                                </div>
                                <div class="item" data-value="baby">
                                    <i class="icon far fa-baby"></i> Baby
                                </div>
                                <div class="item" data-value="unreleased">
                                    <i class="icon fas fa-question"></i> Unreleased
                                </div>
                            </div>
                        </div>

                        <div class="ui selection fluid dropdown">
                            <input type="hidden" id="own-select" value="{{ request.args.get('own') }}">
                            <i class="dropdown icon"></i>
                            <div class="default text">Owned vs. Need</div>
                            <div class="menu">
                                <div class="item" data-value="all">
                                    <i class="icon far fa-clipboard-list"></i>Show All
                                </div>
                                <div class="item" data-value="owned">
                                    <i class="icon far fa-check-square"></i> Owned
                                </div>
                                <div class="item" data-value="notowned">
                                    <i class="icon far fa-square"></i> Not Owned
                                </div>
                            </div>
                        </div>

                        <div id="filter-view">
                            <i class="fa fa-th-list" data-content="Toggle to List View"></i>
                            <i class="fa fa-th-large" style="display:none;" data-content="Toggle to Card View"></i>
                        </div>
                    </div>

                    <div class="list-header ui top attached segment">
                        <div class="search-results-summary">
                            <span class="pokemon-result-count">No Pokemon Found :(</span>
                            <a class="export-list" data-content="Copied!" data-variation="inverted tiny" data-clipboard-action="copy"><i class="fas fa-clipboard"></i></a>
                        </div>
                        <div class="list-selectors">
                            <div class="ui dropdown pointing top right">
                                <input type="hidden" id="list-select" value="{{ request.args.get('list') }}" />
                                <div class="text">Select a DEX...</div>
                                <i class="dropdown icon"></i>
                            </div>
                        </div>
                    </div>

                    <div id="pokemon-list" class="ui blurring bottom attached segment {{ user.player_team }}">
                        <div class="ui inverted dimmer">
                            <div class="ui text loader">Loading</div>
                        </div>
                        <div id="pokemon-wrapper"></div>
                    </div>
                </div>

                <div class="legacy-moves content-panel">
                    <h1>Legacy moves coming soon!</h1>
                </div>

                <div class="raid-bosses content-panel">
                    <div id="raid-bosses-list"></div>
                </div>

                <div class="egg-hatches content-panel">
                    <div id="egg-hatches-list"></div>
                </div>

                <div class="user-settings content-panel">
                    <div class="ui basic segment">
                        <h1 class="ui center aligned icon header">
                            <i class="circular cogs icon"></i>
                            User Settings
                        </h1>
                    </div>
                    <div class="ui segment">
                        <div class="ui two column stackable divided grid">
                            <div class="column">
                                <div class="ui medium header">
                                    <i class="icon far fa-envelope-open"></i>
                                    <div class="content">Change Your Email Address</div>
                                </div>
                                <div class="ui form">
                                    <div class="field">
                                        <input type="email" name="email" id="email"
                                               placeholder="Email Address">
                                    </div>
                                    <button class="ui primary button right floated" id="update-email">
                                        <i class='fas fa-fw fa-envelope'></i> Update email
                                    </button>
                                </div>
                            </div>
                            <div class="column">
                                <div class="ui medium header">
                                    <i class="icon fas fa-medal"></i>
                                    <div class="content">Update Your Trainer Level</div>
                                </div>
                                <div class="ui form">
                                    <div class="field">
                                        <input type="number" name="level" min="1" max="40"
                                               id="level"
                                               placeholder="Player Level">
                                    </div>
                                    <button class="ui primary button right floated"
                                            id="update-player-level"><i
                                            class='fas fa-fw fa-hand-point-up'></i> Level Up!
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ui segment padded">
                        <div class="ui medium header">
                            <i class="icon far fa-ballot-check"></i>
                            <div class="content">Manage Your DEX</div>
                        </div>

                        <div class="ui basic segment">
                            <div class="ui two column stackable divided center aligned grid">
                                <div class="column">
                                    <div class="ui icon header">
                                        <i class="plus icon"></i>
                                        Create New DEX
                                    </div>
                                    <div class="ui primary fluid button create-dex">
                                        Create
                                    </div>
                                </div>

                                <div class="column">
                                    <div class="ui icon header">
                                        <i class="pencil icon"></i>
                                        Edit Existing DEX
                                    </div>
                                    <div class="ui selection fluid dropdown list-edit-select">
                                        <input type="hidden" id="list-edit-select" value="">
                                        <i class="dropdown icon"></i>
                                        <div class="default text">Select DEX...</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ui segment padded">
                        <div class="ui medium header">
                            <i class="icon fas fa-user-secret"></i>
                            <div class="content">Update Your Privacy Settings</div>
                        </div>
                        <div class="ui stackable one column grid">
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui toggle checkbox private-profile">
                                        <input type="checkbox" name="private-profile"
                                               id="private-profile"
                                               tabindex="0"
                                               class="hidden">
                                        <label>Make my profile private</label>
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui toggle checkbox unsubscribe">
                                        <input type="checkbox" name="unsubscribe"
                                               id="unsubscribe"
                                               tabindex="1"
                                               class="hidden">
                                        <label>Unsubscribe from content updates</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="ui divider"></div>

                        <div class="inline field">
                            <button class="ui negative button delete-profile">
                                Delete My Profile
                            </button>
                        </div>
                    </div>

                    <div class="ui segment">
                        <div class="ui medium header">
                            <i class="icon fas fa-coffee"></i>
                            <div class="content">Like what I do?</div>
                        </div>
                        <p>
                            This is a fun pet project, but if you have any ideas, suggestions, or
                            just want to see how it all works
                            <a href="https://github.com/vidoardes/dex" target="_blank">you can
                                check out the GitHub repo here.</a>
                        </p>
                        <p>
                            Although this isn't for profit, it does cost money to run, so if you
                            would like to make a donation to keep the server up I would very much
                            appreciate it.
                            <a href="https://ko-fi.com/vidoardes" target="_blank">You can find my
                                ko-fi page here.</a>
                        </p>
                    </div>
                </div>

                <div class="ui tiny modal delete-profile">
                    <div class="ui icon header">
                        <i class="trash icon"></i>
                        Delete Profile
                    </div>
                    <div class="content">
                        <p>Are you sure you pant to delete your profile?</p>
                        <b>This action is irriversable</b>
                    </div>
                    <div class="actions">
                        <div class="ui cancel button">
                            <i class="remove icon"></i>
                            No, I want to keep my profile
                        </div>
                        <div class="ui red ok button">
                            <i class="trash icon"></i>
                            Yes, delete my profile
                        </div>
                    </div>
                </div>
            </div>

            <div class="ui modal create-dex-popup">
                <i class="close icon"></i>
                <div class="header">Create New DEX</div>
                <div class="content">
                    <form class="ui form">
                        <div class="ui error message"></div>
                        <div class="two fields">
                            <div class="required field">
                                <label>DEX Name</label>
                                <input id="list-name" data-validate="listname" type="text"
                                       autocomplete="off"/>
                            </div>

                            <div class="required field">
                                <label>Colour Indicator</label>
                                <select class="ui fluid dropdown" id="list-colour">
                                    <option value="red">Red</option>
                                    <option value="orange">Orange</option>
                                    <option value="green">Green</option>
                                    <option value="purple">Purple</option>
                                    <option value="blue">Blue</option>
                                    <option value="black">Black</option>
                                    <option value="yellow">Yellow</option>
                                    <option value="pink">Pink</option>
                                </select>
                            </div>
                        </div>

                        <div class="ui small header">Default Filters</div>
                        <p>Selection values in the filters below will always apply to this list,
                            regardless of what is selected in the serach filter. Please note: This
                            will allow for invalid combinations of criteria, so if you were to
                            select "level 1" as a default filter, picking "mythical", or "baby"
                            from the, it will yield zero reults.</p>

                        <div class="two fields">
                            <div class="field">
                                <label>Generations</label>
                                <div class="ui multiple search selection fluid dropdown">
                                    <input type="hidden" id="gen-select" data-validate="genfilters">
                                    <i class="dropdown icon"></i>
                                    <div class="default text">Generations</div>
                                    <div class="menu">
                                        <div class="item" data-value="all">All Released Generations</div>
                                        <div class="item" data-value="1">Gen I (Kanto)</div>
                                        <div class="item" data-value="2">Gen II (Johto)</div>
                                        <div class="item" data-value="3">Gen III (Hoenn)</div>
                                        <div class="item" data-value="4">Gen IV (Sinnoh)</div>
                                        <div class="item" data-value="7">Gen VII (Alola)</div>
                                    </div>
                                </div>
                            </div>
                            <div class="field">
                                <label>Categories</label>
                                <div class="ui multiple search selection fluid dropdown">
                                    <input type="hidden" id="cat-select" data-validate="catfilters">
                                    <i class="dropdown icon"></i>
                                    <div class="default text">Category</div>
                                    <div class="menu">
                                        <div class="item" data-value="all">
                                            <i class="icon book"></i> All Pokemon
                                        </div>
                                        <div class="item" data-value="shiny">
                                            <i class="icon fas fa-star-christmas"></i> Shiny
                                        </div>
                                        <div class="item" data-value="alolan">
                                            <i class="icon alolan"></i> Alolan
                                        </div>
                                        <div class="item" data-value="regional">
                                            <i class="icon fas fa-globe-africa"></i> Regional
                                        </div>
                                        <div class="item" data-value="legendary">
                                            <i class="icon legendary"></i> Legendary
                                        </div>
                                        <div class="item" data-value="mythical">
                                            <i class="icon fas fa-map-marker-question"></i> Mythical
                                        </div>
                                        <div class="item" data-value="costumed">
                                            <i class="icon fab fa-pied-piper-hat"></i> Costumed
                                        </div>
                                        <div class="item" data-value="lucky">
                                            <i class="icon fas fa-dice"></i> Lucky
                                        </div>
                                        <div class="item" data-value="level_1">
                                            <i class="icon fas fa-tachometer-slowest"></i> Level 1
                                        </div>
                                        <div class="item" data-value="baby">
                                            <i class="icon far fa-baby"></i> Baby
                                        </div>
                                        <div class="item" data-value="unreleased">
                                            <i class="icon fas fa-question"></i> Unreleased
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="ui small header">Show / Hide Formes & Variants</div>
                        <p>By default all catchable forms are availible to select, but if you
                            aren't interested in tracking all the variants of Spinda, or have
                            given up the dream of finding all Unown, you can simply remove them
                            from your list via the check boxes below. Deselecting them all
                            will provide you with only unique dex numbers.</p>
                        <div class="ui stackable five column grid view-settings">
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui checkbox show-costumed">
                                        <input type="checkbox" name="viewsettings[]"
                                               value="show-costumed">
                                        <label>Costumed</label>
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui checkbox show-alolan">
                                        <input type="checkbox" name="viewsettings[]"
                                               value="show-alolan">
                                        <label>Alolan</label>
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui checkbox show-unown">
                                        <input type="checkbox" name="viewsettings[]"
                                               value="show-unown">
                                        <label>Unown</label>
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui checkbox show-spinda">
                                        <input type="checkbox" name="viewsettings[]"
                                               value="show-spinda">
                                        <label>Spinda</label>
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui checkbox show-castform">
                                        <input type="checkbox" name="viewsettings[]"
                                               value="show-castform">
                                        <label>Castform</label>
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui checkbox show-deoxys">
                                        <input type="checkbox" name="viewsettings[]"
                                               value="show-deoxys">
                                        <label>Deoxys</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="actions">
                    <div class="ui cancel button">
                        <i class="remove icon"></i>
                        Cancel
                    </div>
                    <div class="ui ok green button">
                        <i class="save icon"></i>
                        Save DEX
                    </div>
                </div>
            </div>

            <div class="ui modal edit-dex-popup">
                <i class="close icon"></i>
                <div class="header">Edit DEX</div>
                <div class="content">
                    <form class="ui form">
                        <div class="ui error message"></div>
                        <input id="old-list" data-validate="oldlist" type="hidden"/>
                        <div class="two fields">
                            <div class="required field">
                                <label>DEX Name</label>
                                <input id="list-name" data-validate="listname" type="text"
                                       autocomplete="off"/>
                            </div>

                            <div class="required field">
                                <label>Colour Indicator</label>
                                <select class="ui fluid dropdown" id="list-colour"
                                        data-validate="listcolour">
                                    <option value="red">Red</option>
                                    <option value="orange">Orange</option>
                                    <option value="green">Green</option>
                                    <option value="purple">Purple</option>
                                    <option value="blue">Blue</option>
                                    <option value="black">Black</option>
                                    <option value="yellow">Yellow</option>
                                    <option value="pink">Pink</option>
                                </select>
                            </div>
                        </div>

                        <div class="ui small header">Default Filters</div>
                        <p>Selection values in the filters below will always apply to this list,
                            regardless of what is selected in the serach filter. Please note: This
                            will allow for invalid combinations of criteria, so if you were to
                            select "level 1" as a default filter, picking "mythical", or "baby"
                            from the, it will yield zero reults.</p>

                        <div class="two fields">
                            <div class="field">
                                <label>Generations</label>
                                <div class="ui multiple search selection fluid dropdown">
                                    <input type="hidden" id="gen-select" data-validate="genfilters">
                                    <i class="dropdown icon"></i>
                                    <div class="default text">Generations</div>
                                    <div class="menu">
                                        <div class="item" data-value="all">All Released Generations</div>
                                        <div class="item" data-value="1">Gen I (Kanto)</div>
                                        <div class="item" data-value="2">Gen II (Johto)</div>
                                        <div class="item" data-value="3">Gen III (Hoenn)</div>
                                        <div class="item" data-value="4">Gen IV (Sinnoh)</div>
                                        <div class="item" data-value="7">Gen VII (Alola)</div>
                                    </div>
                                </div>
                            </div>
                            <div class="field">
                                <label>Categories</label>
                                <div class="ui multiple search selection fluid dropdown">
                                    <input type="hidden" id="cat-select" data-validate="catfilters">
                                    <i class="dropdown icon"></i>
                                    <div class="default text">Category</div>
                                    <div class="menu">
                                        <div class="item" data-value="all">
                                            <i class="icon book"></i> All Pokemon
                                        </div>
                                        <div class="item" data-value="shiny">
                                            <i class="icon fas fa-star-christmas"></i> Shiny
                                        </div>
                                        <div class="item" data-value="alolan">
                                            <i class="icon alolan"></i> Alolan
                                        </div>
                                        <div class="item" data-value="regional">
                                            <i class="icon fas fa-globe-africa"></i> Regional
                                        </div>
                                        <div class="item" data-value="legendary">
                                            <i class="icon legendary"></i> Legendary
                                        </div>
                                        <div class="item" data-value="mythical">
                                            <i class="icon fas fa-map-marker-question"></i> Mythical
                                        </div>
                                        <div class="item" data-value="costumed">
                                            <i class="icon fab fa-pied-piper-hat"></i> Costumed
                                        </div>
                                        <div class="item" data-value="lucky">
                                            <i class="icon fas fa-dice"></i> Lucky
                                        </div>
                                        <div class="item" data-value="level_1">
                                            <i class="icon fas fa-tachometer-slowest"></i> Level 1
                                        </div>
                                        <div class="item" data-value="baby">
                                            <i class="icon far fa-baby"></i> Baby
                                        </div>
                                        <div class="item" data-value="unreleased">
                                            <i class="icon fas fa-question"></i> Unreleased
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="ui small header">Show / Hide Formes & Variants</div>
                        <p>By default all catchable forms are availible to select, but if you
                            aren't interested in tracking all the variants of Spinda, or have
                            given up the dream of finding all Unown, you can simply remove them
                            from your list via the check boxes below. Deselecting them all
                            will provide you with only unique dex numbers.</p>
                        <div class="ui stackable five column grid view-settings">
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui checkbox show-costumed">
                                        <input type="checkbox" name="viewsettings[]"
                                               value="show-costumed">
                                        <label>Costumed</label>
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui checkbox show-alolan">
                                        <input type="checkbox" name="viewsettings[]"
                                               value="show-alolan">
                                        <label>Alolan</label>
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui checkbox show-unown">
                                        <input type="checkbox" name="viewsettings[]"
                                               value="show-unown">
                                        <label>Unown</label>
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui checkbox show-spinda">
                                        <input type="checkbox" name="viewsettings[]"
                                               value="show-spinda">
                                        <label>Spinda</label>
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui checkbox show-castform">
                                        <input type="checkbox" name="viewsettings[]"
                                               value="show-castform">
                                        <label>Castform</label>
                                    </div>
                                </div>
                            </div>
                            <div class="column">
                                <div class="inline field">
                                    <div class="ui checkbox show-deoxys">
                                        <input type="checkbox" name="viewsettings[]"
                                               value="show-deoxys">
                                        <label>Deoxys</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>

                <div class="actions">
                    <div class="ui cancel button">
                        <i class="remove icon"></i>
                        Cancel
                    </div>
                    <div class="ui negative button">
                        <i class="trash icon"></i>
                        Delete Dex
                    </div>
                    <div class="ui ok green button">
                        <i class="save icon"></i>
                        Save DEX
                    </div>
                </div>
            </div>

            <div class="ui modal delete-dex-popup">
                <i class="close icon"></i>
                <div class="header"></div>
                <div class="content"></div>
                <div class="actions">
                    <div class="ui cancel button">
                        <i class="remove icon"></i>
                        No, I changed my mind!
                    </div>
                    <div class="ui ok red button">
                        <i class="trash icon"></i>
                        Yes, delete this list
                    </div>
                </div>
            </div>
        {% endblock %}
    </div>
{% endblock %}

{% block scripts %}
    <script src="https://cdn.jsdelivr.net/npm/intro.js@2/minified/intro.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2/dist/semantic.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
    <script src="{{ url_for('static', filename='bundle.js') }}"></script>
{% endblock %}